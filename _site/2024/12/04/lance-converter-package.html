<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Python Package to convert image datasets to lance type" /><meta property="og:locale" content="en_US" /><meta name="description" content="This post gives a detailed overview of how we can convert any image dataset to lance using a python package" /><meta property="og:description" content="This post gives a detailed overview of how we can convert any image dataset to lance using a python package" /><link rel="canonical" href="http://localhost:4000/2024/12/04/lance-converter-package" /><meta property="og:url" content="http://localhost:4000/2024/12/04/lance-converter-package" /><meta property="og:site_name" content="Deox Labs" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-12-04T00:00:00+05:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Python Package to convert image datasets to lance type" /><meta name="twitter:site" content="@fuxssss" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-12-04T00:00:00+05:30","datePublished":"2024-12-04T00:00:00+05:30","description":"This post gives a detailed overview of how we can convert any image dataset to lance using a python package","headline":"Python Package to convert image datasets to lance type","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2024/12/04/lance-converter-package"},"url":"http://localhost:4000/2024/12/04/lance-converter-package"}</script><title> Python Package to convert image datasets to lance type - Deox Labs</title><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="Deox Labs" href="/atom.xml"><link rel="alternate" type="application/json" title="Deox Labs" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#f5f5f5;max-width:100%;overflow-x:auto}code{padding:.1rem;font-size:.85rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%;background:none;display:block;margin:auto}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.post ol,.project ul,.post ol,.post ul{padding-left:1rem}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}@media print{.no-print,.no-print *{display:none !important}}.back-to-top{position:fixed;bottom:20px;right:20px;background-color:#fff;color:#000;padding:10px;text-decoration:none;border-radius:5px;display:block;margin-right:20%}</style></head><body><main><header aria-hidden="true" class="no-print"> <!--<h1 class="logo">Deox Labs</h1>--><nav role="navigation" aria-hidden="true"><ul><li><a href="/" >Home</a></li><li><a href="/about" >About</a></li><li><a href="/contact" >Contact</a></li><li><a href="/projects" >Projects</a></li></ul></nav></header><section class="post"><h1>Python Package to convert image datasets to lance type</h1><p>A few months ago, I wrote two articles on how the Lance format can supercharge your machine learning workflows. In the <a href="https://vipul-maheshwari.github.io/2024/03/29/effortlessly-loading-and-processing-images-with-lance-a-code-walkthrough">first</a>, I showed how Lance’s columnar storage can make handling large image datasets much more efficient for the ML workflows. Then, I followed up with a <a href="https://vipul-maheshwari.github.io/2024/04/09/convert-any-image-dataset-to-lance">guide</a> on converting datasets like cinic and mini-imagenet into Lance format using a custom Python script in Google Colab. While that worked well, it was a bit manual.</p><p>Today, I’m excited to share a much easier solution: the lance-image-converter Python package. With just a few lines of code, you can now convert any image dataset to the Lance format, making the process quicker and more accessible for everyone.</p><h3 id="what-is-lance-image-converter">What is <code>lance-image-converter</code>?</h3><p>The <code>lance-image-converter</code> package is a Python utility designed to make the conversion of any image dataset into the efficient, columnar Lance format quick and easy. Whether you’re working with small or large image datasets, this package allows you to transform them into Lance datasets without the need for complex scripts or Google Colab notebooks.</p><p>In this updated blog, I will walk you through how to use the <code>lance-image-converter</code> package to convert image datasets and how it improves upon the previous method.</p><h3 id="installing-the-package">Installing the Package</h3><p>Before diving into the conversion process, let’s start by installing the <code>lance-image-converter</code> package. You can easily install it via pip:</p><pre><code class="language-bash">pip install lance-image-converter
</code></pre><h3 id="converting-your-image-dataset-to-lance">Converting Your Image Dataset to Lance</h3><p>Once you’ve installed the package, converting any image dataset to the Lance format is as simple as running the following Python code. The <code>lance-image-converter</code> package abstracts away the complexity of the previous approach, providing a simple interface to convert image datasets:</p><pre><code class="language-python">from lance_image_converter import convert_dataset

# Specify the path to your image dataset folder
image_dataset_path = 'path_to_your_image_dataset'

# Convert the dataset to Lance format
convert_dataset(image_dataset_path, output_dir='path_to_output_lance_files')
</code></pre><p>The <code>convert_dataset</code> function automatically handles the following:</p><ol><li><strong>Reading the image data</strong> – It reads image files and their metadata (filename, category, data split).</li><li><strong>Converting to Lance</strong> – The images are converted into the Lance format with proper schema.</li><li><strong>Saving the Lance files</strong> – Lance files are saved for each dataset split (train, test, validation).</li></ol><p>This method is far more concise than manually iterating over directories, creating schemas, and writing to Lance files as we did in the previous version using raw Python and PyArrow.</p><h3 id="whats-happened-behind-the-scenes">What’s Happened Behind the Scenes?</h3><p>To give you a better understanding, here’s a brief overview of what happens when you use <code>lance-image-converter</code>:</p><ul><li><strong>Image Data</strong>: The package reads images from your dataset directory and converts them into a binary format.</li><li><strong>Metadata Extraction</strong>: Metadata such as the image’s filename, category (label), and data split (train/test/validation) are automatically extracted.</li><li><strong>PyArrow RecordBatch</strong>: The image data and metadata are packaged into a PyArrow <code>RecordBatch</code> for efficient columnar storage.</li><li><strong>Lance Dataset Creation</strong>: These <code>RecordBatch</code> objects are then written to Lance datasets, which are optimized for performance and storage.</li></ul><p>This process mirrors the manual steps we previously took but in a much more user-friendly manner, significantly reducing the boilerplate code and improving maintainability.</p><h3 id="advantages-of-using-lance-image-converter">Advantages of Using <code>lance-image-converter</code></h3><p>With the new package, you can expect several key benefits over the manual script method:</p><ol><li><strong>Simplicity</strong>: No need to write custom processing functions or deal with complex loops; the package handles all of it for you.</li><li><strong>Flexibility</strong>: It supports any image dataset, from well-known benchmarks like <code>cinic</code> and <code>mini-imagenet</code> to your own custom datasets.</li><li><strong>Performance</strong>: By leveraging the Lance format, datasets are stored in a highly compressed, columnar format that makes loading and accessing data lightning-fast.</li><li><strong>Integration</strong>: The converted Lance datasets can easily be integrated with tools like Pandas and machine learning frameworks, allowing you to focus on model training instead of data wrangling.</li></ol><h3 id="loading-your-dataset-into-pandas">Loading Your Dataset into Pandas</h3><p>Once your image dataset has been converted into the Lance format, you can seamlessly load it into Pandas DataFrames for further analysis or training. Here’s how to do it:</p><pre><code class="language-python">import lance
import pandas as pd

# Load Lance dataset
ds = lance.dataset('path_to_output_lance_files')

# Convert Lance dataset to Pandas DataFrame
df = ds.to_pandas()

# Display the first few rows of the DataFrame
print(df.head())
</code></pre><p>This makes it incredibly easy to integrate the Lance format into your existing data pipelines, providing a consistent interface for working with large image datasets.</p><h3 id="a-quick-comparison-manual-script-vs-lance-image-converter">A Quick Comparison: Manual Script vs. <code>lance-image-converter</code></h3><p>Here’s a comparison between the old manual method and the new package approach:</p><table><thead><tr><th>Aspect</th><th>Manual Method</th><th><code>lance-image-converter</code> Package</th></tr></thead><tbody><tr><td><strong>Ease of Use</strong></td><td>Moderate</td><td>Very Easy</td></tr><tr><td><strong>Customizability</strong></td><td>High</td><td>Moderate</td></tr><tr><td><strong>Setup Complexity</strong></td><td>High</td><td>Minimal</td></tr><tr><td><strong>Code Length</strong></td><td>Long</td><td>Short</td></tr><tr><td><strong>Error Handling</strong></td><td>Custom</td><td>Built-in</td></tr></tbody></table><p>As you can see, while the manual method provides more flexibility for fine-tuned control, the <code>lance-image-converter</code> package offers a more streamlined and accessible solution.</p><h3 id="conclusion">Conclusion</h3><p>With the release of the <code>lance-image-converter</code> package, converting your image datasets to the efficient and scalable Lance format has never been easier. It provides the same performance benefits as before—such as faster data loading and reduced storage footprint—while simplifying the workflow significantly.</p><p>Give it a try by installing the package and running the conversion script on your image datasets. This small change can drastically improve your machine learning pipelines, making data loading and processing faster and more efficient.</p><p>Feel free to explore the <code>lance-image-converter</code> <a href="https://github.com/vipul-maheshwari/lance-image-converter">documentation</a> for more details and examples.</p><hr /><p>This revised blog retains the educational nature of the original while focusing on how the new Python package simplifies the process of converting datasets to the Lance format. The transition is explained clearly, and it encourages readers to move from the previous method to the new one with minimal friction.</p><span class="meta"><time datetime="2024-12-04T00:00:00+05:30">December 4, 2024</time></span></section><!-- --- layout: default ---<section class="post"><h2>Python Package to convert image datasets to lance type</h2><p>A few months ago, I wrote two articles on how the Lance format can supercharge your machine learning workflows. In the <a href="https://vipul-maheshwari.github.io/2024/03/29/effortlessly-loading-and-processing-images-with-lance-a-code-walkthrough">first</a>, I showed how Lance’s columnar storage can make handling large image datasets much more efficient for the ML workflows. Then, I followed up with a <a href="https://vipul-maheshwari.github.io/2024/04/09/convert-any-image-dataset-to-lance">guide</a> on converting datasets like cinic and mini-imagenet into Lance format using a custom Python script in Google Colab. While that worked well, it was a bit manual.</p><p>Today, I’m excited to share a much easier solution: the lance-image-converter Python package. With just a few lines of code, you can now convert any image dataset to the Lance format, making the process quicker and more accessible for everyone.</p><h3 id="what-is-lance-image-converter">What is <code>lance-image-converter</code>?</h3><p>The <code>lance-image-converter</code> package is a Python utility designed to make the conversion of any image dataset into the efficient, columnar Lance format quick and easy. Whether you’re working with small or large image datasets, this package allows you to transform them into Lance datasets without the need for complex scripts or Google Colab notebooks.</p><p>In this updated blog, I will walk you through how to use the <code>lance-image-converter</code> package to convert image datasets and how it improves upon the previous method.</p><h3 id="installing-the-package">Installing the Package</h3><p>Before diving into the conversion process, let’s start by installing the <code>lance-image-converter</code> package. You can easily install it via pip:</p><pre><code class="language-bash">pip install lance-image-converter
</code></pre><h3 id="converting-your-image-dataset-to-lance">Converting Your Image Dataset to Lance</h3><p>Once you’ve installed the package, converting any image dataset to the Lance format is as simple as running the following Python code. The <code>lance-image-converter</code> package abstracts away the complexity of the previous approach, providing a simple interface to convert image datasets:</p><pre><code class="language-python">from lance_image_converter import convert_dataset

# Specify the path to your image dataset folder
image_dataset_path = 'path_to_your_image_dataset'

# Convert the dataset to Lance format
convert_dataset(image_dataset_path, output_dir='path_to_output_lance_files')
</code></pre><p>The <code>convert_dataset</code> function automatically handles the following:</p><ol><li><strong>Reading the image data</strong> – It reads image files and their metadata (filename, category, data split).</li><li><strong>Converting to Lance</strong> – The images are converted into the Lance format with proper schema.</li><li><strong>Saving the Lance files</strong> – Lance files are saved for each dataset split (train, test, validation).</li></ol><p>This method is far more concise than manually iterating over directories, creating schemas, and writing to Lance files as we did in the previous version using raw Python and PyArrow.</p><h3 id="whats-happened-behind-the-scenes">What’s Happened Behind the Scenes?</h3><p>To give you a better understanding, here’s a brief overview of what happens when you use <code>lance-image-converter</code>:</p><ul><li><strong>Image Data</strong>: The package reads images from your dataset directory and converts them into a binary format.</li><li><strong>Metadata Extraction</strong>: Metadata such as the image’s filename, category (label), and data split (train/test/validation) are automatically extracted.</li><li><strong>PyArrow RecordBatch</strong>: The image data and metadata are packaged into a PyArrow <code>RecordBatch</code> for efficient columnar storage.</li><li><strong>Lance Dataset Creation</strong>: These <code>RecordBatch</code> objects are then written to Lance datasets, which are optimized for performance and storage.</li></ul><p>This process mirrors the manual steps we previously took but in a much more user-friendly manner, significantly reducing the boilerplate code and improving maintainability.</p><h3 id="advantages-of-using-lance-image-converter">Advantages of Using <code>lance-image-converter</code></h3><p>With the new package, you can expect several key benefits over the manual script method:</p><ol><li><strong>Simplicity</strong>: No need to write custom processing functions or deal with complex loops; the package handles all of it for you.</li><li><strong>Flexibility</strong>: It supports any image dataset, from well-known benchmarks like <code>cinic</code> and <code>mini-imagenet</code> to your own custom datasets.</li><li><strong>Performance</strong>: By leveraging the Lance format, datasets are stored in a highly compressed, columnar format that makes loading and accessing data lightning-fast.</li><li><strong>Integration</strong>: The converted Lance datasets can easily be integrated with tools like Pandas and machine learning frameworks, allowing you to focus on model training instead of data wrangling.</li></ol><h3 id="loading-your-dataset-into-pandas">Loading Your Dataset into Pandas</h3><p>Once your image dataset has been converted into the Lance format, you can seamlessly load it into Pandas DataFrames for further analysis or training. Here’s how to do it:</p><pre><code class="language-python">import lance
import pandas as pd

# Load Lance dataset
ds = lance.dataset('path_to_output_lance_files')

# Convert Lance dataset to Pandas DataFrame
df = ds.to_pandas()

# Display the first few rows of the DataFrame
print(df.head())
</code></pre><p>This makes it incredibly easy to integrate the Lance format into your existing data pipelines, providing a consistent interface for working with large image datasets.</p><h3 id="a-quick-comparison-manual-script-vs-lance-image-converter">A Quick Comparison: Manual Script vs. <code>lance-image-converter</code></h3><p>Here’s a comparison between the old manual method and the new package approach:</p><table><thead><tr><th>Aspect</th><th>Manual Method</th><th><code>lance-image-converter</code> Package</th></tr></thead><tbody><tr><td><strong>Ease of Use</strong></td><td>Moderate</td><td>Very Easy</td></tr><tr><td><strong>Customizability</strong></td><td>High</td><td>Moderate</td></tr><tr><td><strong>Setup Complexity</strong></td><td>High</td><td>Minimal</td></tr><tr><td><strong>Code Length</strong></td><td>Long</td><td>Short</td></tr><tr><td><strong>Error Handling</strong></td><td>Custom</td><td>Built-in</td></tr></tbody></table><p>As you can see, while the manual method provides more flexibility for fine-tuned control, the <code>lance-image-converter</code> package offers a more streamlined and accessible solution.</p><h3 id="conclusion">Conclusion</h3><p>With the release of the <code>lance-image-converter</code> package, converting your image datasets to the efficient and scalable Lance format has never been easier. It provides the same performance benefits as before—such as faster data loading and reduced storage footprint—while simplifying the workflow significantly.</p><p>Give it a try by installing the package and running the conversion script on your image datasets. This small change can drastically improve your machine learning pipelines, making data loading and processing faster and more efficient.</p><p>Feel free to explore the <code>lance-image-converter</code> <a href="https://github.com/vipul-maheshwari/lance-image-converter">documentation</a> for more details and examples.</p><hr /><p>This revised blog retains the educational nature of the original while focusing on how the new Python package simplifies the process of converting datasets to the Lance format. The transition is explained clearly, and it encourages readers to move from the previous method to the new one with minimal friction.</p><span class="meta"><time datetime="2024-12-04T00:00:00+05:30">December 4, 2024</time> &middot; <a href="/tag/LanceDB">LanceDB</a>, <a href="/tag/Dataset">Dataset</a>, <a href="/tag/Python">Python</a>, <a href="/tag/Package">Package</a></span>--> <!--</section>--></main><script async src="https://www.googletagmanager.com/gtag/js?id=G-JBZRCCYMBP"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-JBZRCCYMBP'); </script></body></html>
